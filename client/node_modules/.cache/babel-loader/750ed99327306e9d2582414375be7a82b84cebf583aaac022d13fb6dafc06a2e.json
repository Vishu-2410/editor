{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\realtime-collab-fixed-optB\\\\client\\\\src\\\\pages\\\\Editor.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport API from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Editor() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const nav = useNavigate();\n  const [content, setContent] = useState('');\n  const [title, setTitle] = useState('Loading...');\n  const [activeUsers, setActiveUsers] = useState([]);\n  const [role, setRole] = useState(null);\n  const [collaborators, setCollaborators] = useState([]);\n  const [inviteEmail, setInviteEmail] = useState('');\n  const socketRef = useRef();\n  const saveTimerRef = useRef();\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      nav('/login');\n      return;\n    }\n    socketRef.current = io(process.env.REACT_APP_SOCKET || 'http://localhost:4000', {\n      auth: {\n        token\n      }\n    });\n    const s = socketRef.current;\n    s.on('connect_error', err => console.error('socket connect error', err.message));\n    s.emit('join-document', {\n      docId: id\n    });\n    s.on('document-load', ({\n      content: c,\n      title: t,\n      ownerId,\n      collaborators: cols\n    }) => {\n      setContent(c || '');\n      setTitle(t || 'Untitled');\n      setCollaborators(cols || []);\n      if (String(ownerId) === user.id) setRole('owner');else {\n        const me = (cols || []).find(x => String(x.userId) === user.id);\n        setRole(me ? me.role : 'viewer');\n      }\n    });\n    s.on('content-change', ({\n      content: c\n    }) => {\n      setContent(c);\n    });\n    s.on('active-users', list => setActiveUsers(list || []));\n    s.on('document-saved', () => {/* could show toast */});\n    API.get('/docs/' + id).then(res => {\n      setContent(res.data.doc.content || '');\n      setTitle(res.data.doc.title || 'Untitled');\n      const roleResp = res.data.role;\n      setRole(roleResp);\n      setCollaborators(res.data.doc.collaborators || []);\n    }).catch(e => console.error(e));\n    return () => {\n      s.emit('leave-document', {\n        docId: id\n      });\n      s.disconnect();\n    };\n  }, [id, nav]);\n  useEffect(() => {\n    const s = socketRef.current;\n    if (!s) return;\n    if (saveTimerRef.current) clearTimeout(saveTimerRef.current);\n    if (!(role === 'owner' || role === 'collaborator')) return;\n    saveTimerRef.current = setTimeout(() => {\n      s.emit('content-change', {\n        docId: id,\n        content\n      });\n    }, 300);\n  }, [content, id, role]);\n  useEffect(() => {\n    const s = socketRef.current;\n    const timer = setInterval(() => {\n      if (s && (role === 'owner' || role === 'collaborator')) s.emit('save-document', {\n        docId: id,\n        content\n      });\n      if (role === 'owner' || role === 'collaborator') API.put('/docs/' + id + '/content', {\n        content\n      }).catch(e => console.error(e));\n    }, 10000);\n    return () => clearInterval(timer);\n  }, [id, content, role]);\n  async function saveNow() {\n    const s = socketRef.current;\n    if (!(role === 'owner' || role === 'collaborator')) return alert('You do not have permission to save.');\n    if (s) s.emit('save-document', {\n      docId: id,\n      content\n    });\n    if (role === 'owner') {\n      await API.put('/docs/' + id + '/title', {\n        title\n      }).catch(e => console.error(e));\n    }\n    await API.put('/docs/' + id + '/content', {\n      content\n    }).catch(e => console.error(e));\n    alert('Saved');\n  }\n  async function invite() {\n    if (!inviteEmail) return alert('Enter email');\n    try {\n      const res = await API.post('/docs/' + id + '/collaborators', {\n        email: inviteEmail,\n        role: 'collaborator'\n      });\n      setCollaborators(res.data.collaborators || []);\n      setInviteEmail('');\n      alert('Invited');\n    } catch (e) {\n      var _e$response, _e$response$data;\n      alert(((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Invite failed');\n    }\n  }\n  async function removeCollab(collabId) {\n    if (!window.confirm('Remove collaborator?')) return;\n    try {\n      const res = await API.delete('/docs/' + id + '/collaborators/' + collabId);\n      setCollaborators(res.data.collaborators || []);\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n      alert(((_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || 'Remove failed');\n    }\n  }\n  async function deleteDoc() {\n    if (!window.confirm('Delete document? This cannot be undone.')) return;\n    try {\n      await API.delete('/docs/' + id);\n      nav('/dashboard');\n    } catch (e) {\n      var _e$response3, _e$response3$data;\n      alert(((_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.message) || 'Delete failed');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      gap: 20,\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: title,\n            onChange: e => setTitle(e.target.value),\n            style: {\n              fontSize: 18,\n              width: '420px'\n            },\n            disabled: role !== 'owner'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              padding: '6px 8px',\n              background: '#efefef',\n              borderRadius: 6\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Your role:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 83\n            }, this), \" \", role]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: saveNow,\n            disabled: !(role === 'owner' || role === 'collaborator'),\n            children: \"Save now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => nav('/dashboard'),\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 11\n          }, this), role === 'owner' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: deleteDoc,\n            style: {\n              marginLeft: 8,\n              background: '#ffdddd'\n            },\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 32\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: content,\n        onChange: e => setContent(e.target.value),\n        readOnly: !(role === 'owner' || role === 'collaborator'),\n        style: {\n          width: '100%',\n          height: '70vh',\n          marginTop: 12\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 320\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Active collaborators\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: activeUsers.map(u => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [u.username, \" \", u.role ? `(${u.role})` : '']\n        }, u.userId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 30\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Collaborators\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: collaborators.map(c => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [String(c.userId), \" \\u2014 \", c.role, role === 'owner' && /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                marginLeft: 8\n              },\n              onClick: () => removeCollab(c.userId),\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this)]\n          }, c.userId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }, this), role === 'owner' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Invite by email\",\n            value: inviteEmail,\n            onChange: e => setInviteEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: invite,\n            children: \"Invite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Auto-saves every 10s. Real-time updates via Socket.IO. Owners can manage collaborators.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 11\n  }, this);\n}\n_s(Editor, \"AEu78Qza9W8NEFbykAuKXQInieY=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useParams","useNavigate","io","API","jsxDEV","_jsxDEV","Editor","_s","id","nav","content","setContent","title","setTitle","activeUsers","setActiveUsers","role","setRole","collaborators","setCollaborators","inviteEmail","setInviteEmail","socketRef","saveTimerRef","user","JSON","parse","localStorage","getItem","token","current","process","env","REACT_APP_SOCKET","auth","s","on","err","console","error","message","emit","docId","c","t","ownerId","cols","String","me","find","x","userId","list","get","then","res","data","doc","roleResp","catch","e","disconnect","clearTimeout","setTimeout","timer","setInterval","put","clearInterval","saveNow","alert","invite","post","email","_e$response","_e$response$data","response","removeCollab","collabId","window","confirm","delete","_e$response2","_e$response2$data","deleteDoc","_e$response3","_e$response3$data","style","display","gap","padding","children","flex","justifyContent","alignItems","value","onChange","target","fontSize","width","disabled","fileName","_jsxFileName","lineNumber","columnNumber","background","borderRadius","onClick","marginLeft","readOnly","height","marginTop","map","u","username","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/hp/Downloads/realtime-collab-fixed-optB/client/src/pages/Editor.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport API from '../services/api';\n\nexport default function Editor(){\n  const { id } = useParams();\n  const nav = useNavigate();\n  const [content, setContent] = useState('');\n  const [title, setTitle] = useState('Loading...');\n  const [activeUsers, setActiveUsers] = useState([]);\n  const [role, setRole] = useState(null);\n  const [collaborators, setCollaborators] = useState([]);\n  const [inviteEmail, setInviteEmail] = useState('');\n  const socketRef = useRef();\n  const saveTimerRef = useRef();\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n\n  useEffect(()=>{\n    const token = localStorage.getItem('token');\n    if (!token) { nav('/login'); return; }\n    socketRef.current = io(process.env.REACT_APP_SOCKET || 'http://localhost:4000', { auth: { token } });\n    const s = socketRef.current;\n    s.on('connect_error', (err)=>console.error('socket connect error', err.message));\n    s.emit('join-document', { docId: id });\n    s.on('document-load', ({ content: c, title: t, ownerId, collaborators: cols }) => {\n      setContent(c || '');\n      setTitle(t || 'Untitled');\n      setCollaborators(cols || []);\n      if (String(ownerId) === user.id) setRole('owner');\n      else {\n        const me = (cols || []).find(x => String(x.userId) === user.id);\n        setRole(me ? me.role : 'viewer');\n      }\n    });\n    s.on('content-change', ({ content: c }) => { setContent(c); });\n    s.on('active-users', list => setActiveUsers(list || []));\n    s.on('document-saved', ()=>{/* could show toast */});\n\n    API.get('/docs/' + id).then(res => {\n      setContent(res.data.doc.content || ''); setTitle(res.data.doc.title || 'Untitled');\n      const roleResp = res.data.role;\n      setRole(roleResp);\n      setCollaborators(res.data.doc.collaborators || []);\n    }).catch(e=>console.error(e));\n\n    return ()=>{ s.emit('leave-document', { docId: id }); s.disconnect(); }\n  }, [id, nav]);\n\n  useEffect(()=>{\n    const s = socketRef.current;\n    if (!s) return;\n    if (saveTimerRef.current) clearTimeout(saveTimerRef.current);\n    if (!(role === 'owner' || role === 'collaborator')) return;\n    saveTimerRef.current = setTimeout(()=> {\n      s.emit('content-change', { docId: id, content });\n    }, 300);\n  }, [content, id, role]);\n\n  useEffect(()=>{\n    const s = socketRef.current;\n    const timer = setInterval(()=> {\n      if (s && (role === 'owner' || role === 'collaborator')) s.emit('save-document', { docId: id, content });\n      if (role === 'owner' || role === 'collaborator') API.put('/docs/' + id + '/content', { content }).catch(e=>console.error(e));\n    }, 10000);\n    return ()=>clearInterval(timer);\n  }, [id, content, role]);\n\n  async function saveNow(){\n    const s = socketRef.current;\n    if (!(role === 'owner' || role === 'collaborator')) return alert('You do not have permission to save.');\n    if (s) s.emit('save-document', { docId: id, content });\n    if (role === 'owner') {\n      await API.put('/docs/' + id + '/title', { title }).catch(e=>console.error(e));\n    }\n    await API.put('/docs/' + id + '/content', { content }).catch(e=>console.error(e));\n    alert('Saved');\n  }\n\n  async function invite(){\n    if (!inviteEmail) return alert('Enter email');\n    try {\n      const res = await API.post('/docs/' + id + '/collaborators', { email: inviteEmail, role: 'collaborator' });\n      setCollaborators(res.data.collaborators || []);\n      setInviteEmail('');\n      alert('Invited');\n    } catch (e) {\n      alert(e.response?.data?.message || 'Invite failed');\n    }\n  }\n\n  async function removeCollab(collabId){\n    if (!window.confirm('Remove collaborator?')) return;\n    try {\n      const res = await API.delete('/docs/' + id + '/collaborators/' + collabId);\n      setCollaborators(res.data.collaborators || []);\n    } catch (e) { alert(e.response?.data?.message || 'Remove failed'); }\n  }\n\n  async function deleteDoc(){\n    if (!window.confirm('Delete document? This cannot be undone.')) return;\n    try {\n      await API.delete('/docs/' + id);\n      nav('/dashboard');\n    } catch (e) { alert(e.response?.data?.message || 'Delete failed'); }\n  }\n\n  return (<div style={{display:'flex', gap:20, padding:20}}>\n    <div style={{flex:1}}>\n      <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\n        <div style={{display:'flex', alignItems:'center', gap:12}}>\n          <input value={title} onChange={e=>setTitle(e.target.value)} style={{fontSize:18, width:'420px'}} disabled={role !== 'owner'} />\n          <span style={{padding:'6px 8px', background:'#efefef', borderRadius:6}}><b>Your role:</b> {role}</span>\n        </div>\n        <div>\n          <button onClick={saveNow} disabled={!(role === 'owner' || role === 'collaborator')}>Save now</button>\n          <button onClick={()=>nav('/dashboard')}>Back</button>\n          {role === 'owner' && <button onClick={deleteDoc} style={{marginLeft:8, background:'#ffdddd'}}>Delete</button>}\n        </div>\n      </div>\n      <textarea value={content} onChange={e=>setContent(e.target.value)} readOnly={!(role === 'owner' || role === 'collaborator')} style={{width:'100%', height:'70vh', marginTop:12}} />\n    </div>\n    <div style={{width:320}}>\n      <h4>Active collaborators</h4>\n      <ul>\n        {activeUsers.map(u=> <li key={u.userId}>{u.username} {u.role ? `(${u.role})` : ''}</li>)}\n      </ul>\n\n      <div style={{marginTop:20}}>\n        <h4>Collaborators</h4>\n        <ul>\n          {collaborators.map(c => (\n            <li key={c.userId}>\n              {String(c.userId)} â€” {c.role}\n              {role === 'owner' && (\n                <button style={{marginLeft:8}} onClick={()=>removeCollab(c.userId)}>Remove</button>\n              )}\n            </li>\n          ))}\n        </ul>\n        {role === 'owner' && (\n          <div style={{marginTop:8}}>\n            <input placeholder='Invite by email' value={inviteEmail} onChange={e=>setInviteEmail(e.target.value)} />\n            <button onClick={invite}>Invite</button>\n          </div>\n        )}\n      </div>\n\n      <div style={{marginTop:20}}>\n        <h4>Info</h4>\n        <p>Auto-saves every 10s. Real-time updates via Socket.IO. Owners can manage collaborators.</p>\n      </div>\n    </div>\n  </div>);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}